#!/bin/sh -e
[ -z "$RES" ] && (echo "# Run like this:\nRES=1280x1024 WIN_USER=\"\" WIN_PASS=\"\" GITHUB_NAME=\"\" GITHUB_EMAIL=\"\" $0"; exit 1;)

WLAN=`ip link|cut -d\  -f2|grep ^w|cut -d: -f1`
echo default wlan is $WLAN

echo aliases
F=~/.bash_aliases
grep -q \\#defaults $F && mv $F $F.tmp && cat $F.tmp | sed '/^\#defaults/,/^\#end-defaults/d' > $F && rm $F.tmp
echo '#defaults
WLAN='$WLAN'
DISPLAY=:0
alias apt="sudo apt"
alias pacman="sudo pacman"
alias dpa="docker ps -a"
alias dxxx="docker rm \"\$\(docker ps -a -q\)\""
function gam { git commit -am "$@"; } 
function gpm { git commit -am "$@"; git push; }
function gp { git commit -am "..."; git push; }
alias apt="sudo apt"
alias mkdir="mkdir -p"
alias pacman="sudo pacman"
alias apt-get="sudo apt-get"
alias apt="sudo apt"
alias xtv="xtightvncviewer -compresslevel 9 -encodings 'tight copyrect coRRE' -quality 3"
alias rd="rdesktop -D -K -z -r clipboard:CLIPBOARD -g '"$RES -u $WIN_USER"'"
#end-defaults' >> $F
# -p $WIN_PASS
if [ -e `which git` ]; then 
  echo git credentials
  git config --global user.email "$GITHUB_EMAIL"
  git config --global user.name "$GITHUB_NAME"
  git config --global push.default simple
fi 
echo Done\!

echo source $F # if you want it already
#apt install screen git iotop 
